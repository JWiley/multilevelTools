<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Weighted Simple Moving Average — weighted.sma • multilevelTools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Weighted Simple Moving Average — weighted.sma" />
<meta property="og:description" content="This function estimates the simple moving average for a specific window
and weights it with a variety of optional decays (e.g., exponential, linear, none).
Whether to omit missing data or not is based on the missing threshold, which is a
proportion and indicates the tolerance. If the weighted proportion missing exceeds
this threshold, then that observvation is missing, otherwise, missing data are excluded
and the weighted simple moving average calculated on the non missing data." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">multilevelTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/lmer-vignette.html">Multilevel Models using lmer</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JWiley/multilevelTools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Weighted Simple Moving Average</h1>
    <small class="dont-index">Source: <a href='https://github.com/JWiley/multilevelTools/blob/master/R/descriptives.R'><code>R/descriptives.R</code></a></small>
    <div class="hidden name"><code>weighted.sma.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function estimates the simple moving average for a specific window
and weights it with a variety of optional decays (e.g., exponential, linear, none).
Whether to omit missing data or not is based on the missing threshold, which is a
proportion and indicates the tolerance. If the weighted proportion missing exceeds
this threshold, then that observvation is missing, otherwise, missing data are excluded
and the weighted simple moving average calculated on the non missing data.</p>
    </div>

    <pre class="usage"><span class='fu'>weighted.sma</span>(
  <span class='no'>x</span>,
  <span class='no'>window</span>,
  <span class='kw'>decay</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"exponential"</span>, <span class='st'>"linear"</span>, <span class='st'>"none"</span>),
  <span class='no'>alpha</span>,
  <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Time series data on which to calculate the weighted simple moving average.
It is assumed that these data are in the correct order and that time is
equally spaced. Any missing data should be filled in with NAs.</p></td>
    </tr>
    <tr>
      <th>window</th>
      <td><p>An integer indicating the size of the window to use.
This window will include the current value.</p></td>
    </tr>
    <tr>
      <th>decay</th>
      <td><p>A character string indicating the type of decay to use on the weights.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>An optional value. Not needed for <code>decay</code> = &#8220;none&#8221;, but it
is required for the exponential and linear decay. For exponential and linear decay,
alpha should range between 0 and 1. 0 will result in no decay.</p></td>
    </tr>
    <tr>
      <th>missThreshold</th>
      <td><p>A numeric value indicating the proportion of data that can be
missing for a given window before the resulting simple moving average is set to
missing. This is a proportion of the weighted data, so not all data points will
necessarily be equally weighted.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric vector of the weighted simple moving averages</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>dweights</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/expand.grid.html'>expand.grid</a></span>(
  <span class='kw'>time</span> <span class='kw'>=</span> <span class='fl'>0</span>:<span class='fl'>10</span>,
  <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fl'>.1</span>))

<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>ggplot2</span>)

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>dweights</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='no'>time</span>, (<span class='fl'>1</span> - <span class='no'>alpha</span>)^<span class='no'>time</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>alpha</span>))) +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span>() + <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>() + <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_bw</a></span>() +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_reverse</a></span>() +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span>(<span class='kw'>legend.position</span> <span class='kw'>=</span> <span class='st'>"bottom"</span>) +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"Exponential Decay in Weights"</span>)</div><div class='img'><img src='weighted.sma-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>dweights</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='no'>time</span>, <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>pmax</a></span>(<span class='fl'>1</span> - <span class='no'>alpha</span> * <span class='no'>time</span>, <span class='fl'>0</span>), <span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>alpha</span>))) +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span>() + <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>() + <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_bw</a></span>() +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_reverse</a></span>() +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span>(<span class='kw'>legend.position</span> <span class='kw'>=</span> <span class='st'>"bottom"</span>) +
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"Linear Decay in Weights"</span>)</div><div class='img'><img src='weighted.sma-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"none"</span>,
             <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1] NA NA  2  3  4</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"exponential"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1] NA NA  2  3  4</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"linear"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1] NA NA  2  3  4</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"exponential"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.1</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1]       NA       NA 2.070111 3.070111 4.070111</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"exponential"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.5</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1]       NA       NA 2.428571 3.428571 4.428571</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"linear"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.1</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1]       NA       NA 2.074074 3.074074 4.074074</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>3L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"linear"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.3</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt; [1]       NA       NA 2.285714 3.285714 4.285714</div><div class='input'>
<span class='fu'>weighted.sma</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>NA</span>, <span class='fl'>NA</span>, <span class='fl'>4</span>, <span class='fl'>5</span>),
             <span class='kw'>window</span> <span class='kw'>=</span> <span class='fl'>4L</span>, <span class='kw'>decay</span> <span class='kw'>=</span> <span class='st'>"exponential"</span>,
             <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.4</span>, <span class='kw'>missThreshold</span> <span class='kw'>=</span> <span class='fl'>.4</span>)</div><div class='output co'>#&gt; [1]    NA    NA    NA    NA 4.625</div><div class='input'>
<span class='co'>## clean up</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span>(<span class='no'>dweights</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joshua F. Wiley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


